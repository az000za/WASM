<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Self-Compiling WebAssembly</title>
</head>
<body id="root">
    <h1>Self-Compiling WebAssembly</h1>
    <button onclick="runWasm()">Run JavaScript to Wasm</button>
</body>
<script type="text/javascript" filename="app.wasmcompile.html">
        // Define a simple function in JavaScript
        function add(a, b) {
            return a + b;
        }

        // Your WebAssembly binary code (replace with actual compiled code)
        const wasmCode = new Uint8Array([
            // ... Your WebAssembly binary data ...
        ]);

        // Compile and instantiate the WebAssembly module
        WebAssembly.compile(wasmCode).then(module => {
            const instance = new WebAssembly.Instance(module, { env: { add } });
            window.runWasm = () => {
                const result = instance.exports.my_add(2, 3);
                console.log(`Result of adding 2 and 3: ${result}`);
            };
        });
</script>
</body>
</html>
